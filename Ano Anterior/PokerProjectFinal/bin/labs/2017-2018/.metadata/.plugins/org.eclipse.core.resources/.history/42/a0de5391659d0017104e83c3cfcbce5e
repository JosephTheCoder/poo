package schedule_fetch;

import java.io.BufferedReader;
import java.io.StringReader;
import java.text.DateFormat;
import java.text.SimpleDateFormat;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Date;
import java.util.Iterator;
import java.util.List;
import java.util.Scanner;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.nodes.TextNode;
import org.jsoup.select.Elements;



public class ScheduleRequest {

	private static final String NewsBaseUrl = "http://transtejo.transporteslisboa.pt/feed/";
	
	
	public static void main(String[] args) {
		
		// Setting up local variables
		Document html = null;
              
             
		
        try{
        	// Parsing html
            Iterator iterator = Jsoup.connect(NewsBaseUrl).get().select("item").iterator();            
            
            while(iterator.hasNext()){
            	Element item = (Element) iterator.next();
            	String title = item.select("title").first().text();
                String dateStr = item.select("pubDate").first().text();
                String link = item.select("guid").first().text();
                String content = item.select("content|encoded").first().text().replaceFirst("<p>O post <a rel=\"nofollow\".*aparece primeiro.*</p>", "");
            	
            	System.out.println(title);
            	System.out.println(dateStr);
            	System.out.println(link);
            	System.out.println(content);
            	System.out.println("------------");
            	            
            	DateFormat dF = new SimpleDateFormat("EEE, dd MMM yyyy hh:mm:ss zzzzz"); // The mask
            	// 'a' value in the Mask represents AM / PM - h means hours in AM/PM mode
            	Date date = dF.parse(dateStr);
                long epoch = date.getTime();
                System.out.println("Epoch:"+ epoch);
            }
            
            
        } catch (Exception e) {
            e.printStackTrace();
        }
	}
	
	private static int getTripPlacesByTitle(String title){
        if(title.equals("Montijo")){
            return TripEntry.PLACE_MONTIJO;
        } else if (title.equals("Barreiro")){
            return TripEntry.PLACE_BARREIRO;
        } else if (title.equals("Seixal")){
            return TripEntry.PLACE_SEIXAL;
        } else if (title.equals("Cacilhas")){
            return TripEntry.PLACE_CACILHAS;
        } else if (title.equals("Trafaria (F)")){
            return TripEntry.PLACE_TRAFARIA;
        } else if (title.equals("Passagem Porto Brandão")){
            return TripEntry.PLACE_PORTOBRANDAO;
        } else if (title.equals("Terreiro do Paço")){
            return TripEntry.PLACE_TERREIROPACO;
        } else if (title.equals("Cais do Sodré")){
            return TripEntry.PLACE_CAISSODRE;
        } else if (title.equals("Belém (F)")){
            return TripEntry.PLACE_BELEM;
        } else {
            return -1;
        }
    }

}
